<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

<!--   ====================== sample of table creation using xml  =============================-->

<!--    <changeSet id="create-table-address" author="Andrey">-->
<!--        <createTable tableName="address" remarks="Table with addresses">-->
<!--            <column name="address_id" type="int4"  autoIncrement="true" remarks="Address ID (PK)">-->
<!--                <constraints primaryKey="true" primaryKeyName="address_id"/>-->
<!--            </column>-->
<!--            <column name="customer_fk_id" type="int4" remarks="Customer FK">-->
<!--                <constraints nullable="true"/>-->
<!--            </column>-->
<!--            <column name="country" type="varchar(255)" remarks="Country">-->
<!--                <constraints nullable="false"/>-->
<!--            </column>-->
<!--            <column name="postal_code" type="varchar(255)" remarks="Postal code">-->
<!--                <constraints nullable="false"/>-->
<!--            </column>-->
<!--            <column name="city" type="varchar(255)" remarks="City">-->
<!--                <constraints nullable="false"/>-->
<!--            </column>-->
<!--            <column name="address_line" type="varchar(255)" remarks="Address line (street, building, apartment, etc.)">-->
<!--                <constraints nullable="false"/>-->
<!--            </column>-->
<!--        </createTable>-->
<!--    </changeSet>-->

    <!--    table creation using sql-->

    <changeSet id="create-table-address" author="Andrey">
        <sql splitStatements="false" stripComments="false">
            CREATE TABLE "address" (
                "address_id" int4 NOT NULL,
                "country" varchar(255) NOT NULL,
                "postal_code" varchar(255),
                "city" varchar(255) NOT NULL,
                "address_line" varchar(255) NOT NULL,
                PRIMARY KEY ("address_id")
            );
            COMMENT ON COLUMN address.address_id IS 'Address ID (PK, FK)';
            COMMENT ON COLUMN address.address_line IS 'Address line (street, building, apartment, etc.)';
        </sql>
    </changeSet>

    <changeSet id="create-table-customer" author="Andrey">
        <sql splitStatements="false" stripComments="false">
            CREATE TABLE "customer" (
                "customer_id" int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY,
                "first_name" varchar(255) NOT NULL,
                "last_name" varchar(255) NOT NULL,
                "balance" int4,
                "phone" varchar(255),
                "email" varchar(255),
                PRIMARY KEY ("customer_id")
            );
            COMMENT ON COLUMN customer.customer_id IS 'Customer ID (PK)';
        </sql>
    </changeSet>

    <changeSet id="create-table-deal" author="Andrey">
        <sql splitStatements="false" stripComments="false">
            CREATE TABLE "deal" (
                "deal_id" int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY,
                "customer_fk_id" int4,
                "product_fk_id" int4,
                "quantity" int4,
                PRIMARY KEY ("deal_id")
            );
        </sql>
    </changeSet>

    <changeSet id="create-table-product" author="Andrey">
        <sql splitStatements="false" stripComments="false">
            CREATE TABLE "product" (
                "product_id" int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY,
                "title" varchar(255) NOT NULL,
                "price" int4 NOT NULL,
                "quantity" int4 NOT NULL,
                PRIMARY KEY ("product_id")
            );
        </sql>
    </changeSet>

</databaseChangeLog>